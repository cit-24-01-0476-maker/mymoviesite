<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyMovieSite - Ultra Premium Streaming</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        /* --- ULTRA PREMIUM VARIABLES --- */
        :root {
            --bg-color: #030303;
            --text-main: #ffffff;
            --text-muted: #b3b3b3;
            --accent-red: #e50914;
            --accent-glow: rgba(229, 9, 20, 0.6);
            --glass-panel: rgba(20, 20, 20, 0.85);
            --smooth-ease: cubic-bezier(0.19, 1, 0.22, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', sans-serif; cursor: none; }
        
        body { 
            background-color: var(--bg-color); 
            color: var(--text-main); 
            overflow-x: hidden; 
            width: 100%;
        }
        
        a { text-decoration: none; color: inherit; transition: 0.3s; }

        /* --- ðŸª„ MAGIC CURSOR --- */
        .cursor-dot { position: fixed; top: 0; left: 0; width: 8px; height: 8px; background: var(--accent-red); border-radius: 50%; transform: translate(-50%, -50%); z-index: 9999; pointer-events: none; box-shadow: 0 0 15px var(--accent-red); }
        .cursor-outline { position: fixed; top: 0; left: 0; width: 45px; height: 45px; border: 2px solid rgba(229, 9, 20, 0.5); border-radius: 50%; transform: translate(-50%, -50%); z-index: 9998; pointer-events: none; transition: width 0.2s, height 0.2s, background-color 0.2s; }
        body.hovering .cursor-outline { width: 80px; height: 80px; background-color: rgba(229, 9, 20, 0.1); border-color: transparent; mix-blend-mode: screen; }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-red); }

        /* --- BACKGROUND AMBIANCE --- */
        .ambient-glow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; background: radial-gradient(circle at 50% 50%, rgba(229, 9, 20, 0.05), transparent 70%); animation: pulseAmbience 10s infinite alternate; }
        @keyframes pulseAmbience { 0% { opacity: 0.3; transform: scale(1); } 100% { opacity: 0.7; transform: scale(1.1); } }

        /* --- PRELOADER --- */
        .preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s ease; }
        .loader-logo { font-size: 3rem; font-weight: 900; color: var(--accent-red); letter-spacing: -2px; animation: textShine 2s infinite; }

        /* --- HEADER --- */
        header { position: fixed; top: 0; width: 100%; padding: 25px 5%; display: flex; justify-content: space-between; align-items: center; z-index: 100; transition: 0.4s var(--smooth-ease); }
        header.scrolled { background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.05); padding: 15px 5%; }
        
        .logo { font-size: 2rem; font-weight: 800; color: var(--accent-red); letter-spacing: -1px; }
        .logo span { color: white; }
        
        nav ul { display: flex; list-style: none; gap: 35px; }
        nav ul li a { font-size: 0.95rem; font-weight: 500; color: #ccc; position: relative; }
        nav ul li a::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background: var(--accent-red); transition: 0.3s; }
        nav ul li a:hover { color: white; }
        nav ul li a:hover::after { width: 100%; }

        .btn-whatsapp { padding: 10px 20px; background: rgba(37, 211, 102, 0.15); color: #25D366; border-radius: 50px; font-weight: 600; border: 1px solid rgba(37, 211, 102, 0.3); display: flex; align-items: center; gap: 8px; transition: 0.3s; }
        .btn-whatsapp:hover { background: #25D366; color: black; box-shadow: 0 0 20px rgba(37, 211, 102, 0.4); }

        /* --- HERO --- */
        .hero { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; position: relative; overflow: hidden; }
        .hero-bg { position: absolute; inset: 0; background: url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover; opacity: 0.4; animation: zoomBg 20s infinite alternate; }
        .hero-gradient { position: absolute; inset: 0; background: linear-gradient(to bottom, #050505 0%, transparent 50%, #050505 100%); }
        @keyframes zoomBg { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }

        .hero-content { z-index: 2; width: 100%; max-width: 1000px; padding: 0 20px; animation: fadeInUp 1s var(--smooth-ease); }
        .hero h1 { font-size: 5.5rem; font-weight: 900; line-height: 1; margin-bottom: 20px; letter-spacing: -3px; background: linear-gradient(to right, #fff, #888); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { font-size: 1.4rem; color: #aaa; margin-bottom: 40px; font-weight: 300; }

        /* --- SEARCH --- */
        .search-container { position: relative; width: 100%; max-width: 700px; margin: 0 auto; }
        .search-bar { width: 100%; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1); border-radius: 50px; padding: 5px; display: flex; backdrop-filter: blur(10px); transition: 0.3s; }
        .search-bar:focus-within { background: rgba(255,255,255,0.12); border-color: var(--accent-red); box-shadow: 0 0 30px rgba(229,9,20,0.2); transform: scale(1.02); }
        .search-bar input { flex: 1; background: transparent; border: none; padding: 15px 25px; color: white; font-size: 1.1rem; outline: none; }
        .search-bar button { background: var(--accent-red); color: white; border: none; padding: 0 35px; border-radius: 40px; font-weight: 600; font-size: 1rem; cursor: none; transition: 0.3s; }
        .search-bar button:hover { background: #ff2a35; box-shadow: 0 0 20px var(--accent-red); }

        /* --- SECTIONS --- */
        section { padding: 80px 5%; position: relative; z-index: 2; }
        .section-header { display: flex; align-items: center; margin-bottom: 40px; gap: 15px; }
        .section-line { height: 40px; width: 6px; background: var(--accent-red); border-radius: 4px; box-shadow: 0 0 15px var(--accent-red); }
        .section-title { font-size: 2.2rem; font-weight: 700; letter-spacing: -1px; }

        /* --- MOVIE CARDS (LIVE SHINE & 3D) --- */
        .carousel { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px; }
        
        .movie-card { 
            position: relative; border-radius: 12px; overflow: hidden; cursor: none; 
            background: #111; transform-style: preserve-3d; perspective: 1000px;
            transition: transform 0.2s, box-shadow 0.3s; border: 1px solid rgba(255,255,255,0.05);
        }
        .movie-card img { width: 100%; height: 340px; object-fit: cover; transition: 0.5s; }
        
        /* SHINE EFFECT */
        .movie-card::before {
            content: ''; position: absolute; top: 0; left: -150%; width: 50%; height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
            transform: skewX(-25deg); z-index: 2; pointer-events: none;
            animation: shinePass 4s infinite;
        }
        @keyframes shinePass { 0% { left: -150%; } 20% { left: 200%; } 100% { left: 200%; } }

        .movie-card:hover { transform: translateY(-10px) scale(1.02); box-shadow: 0 20px 40px rgba(0,0,0,0.8), 0 0 20px var(--accent-glow); border-color: rgba(229,9,20,0.5); z-index: 10; }
        .movie-card:hover img { filter: brightness(0.4); transform: scale(1.1); }

        .movie-info { position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px; background: linear-gradient(to top, #000, transparent); z-index: 3; transform: translateZ(20px); }
        .movie-info h4 { font-size: 1.1rem; font-weight: 600; text-align: center; text-shadow: 0 2px 10px rgba(0,0,0,0.8); }

        .play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); width: 60px; height: 60px; background: var(--accent-red); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white; box-shadow: 0 0 30px var(--accent-red); transition: 0.3s var(--smooth-ease); z-index: 4; }
        .movie-card:hover .play-icon { transform: translate(-50%, -50%) scale(1); }

        .badges { position: absolute; top: 10px; left: 10px; display: flex; flex-direction: column; gap: 5px; z-index: 4; }
        .badge { background: rgba(0,0,0,0.7); padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 700; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(5px); }
        .badge.quality { background: var(--accent-red); border: none; }

        /* --- CINEMAS & MAP --- */
        .cinema-controls { display: flex; gap: 15px; margin-bottom: 20px; }
        .btn-location { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); padding: 0 25px; border-radius: 10px; color: white; font-weight: 600; cursor: none; transition: 0.3s; }
        .btn-location:hover { background: rgba(255,255,255,0.2); }
        .cinema-input { flex: 1; padding: 15px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; color: white; outline: none; }
        .cinema-input:focus { border-color: var(--accent-red); }
        
        #map { height: 400px; width: 100%; border-radius: 15px; z-index: 1; border: 1px solid rgba(255,255,255,0.1); }
        .cinema-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 30px; }
        .cinema-card { background: rgba(255,255,255,0.03); padding: 25px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }
        .cinema-card:hover { background: rgba(255,255,255,0.06); border-color: var(--accent-red); transform: translateY(-5px); }

        /* --- UPDATES --- */
        .updates-container { display: flex; gap: 30px; flex-wrap: wrap; }
        .info-box { flex: 1; min-width: 300px; background: rgba(255,255,255,0.03); padding: 30px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); }
        .update-item { display: flex; align-items: center; gap: 15px; padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.05); color: #ccc; }
        .update-item i { color: var(--accent-red); }

        /* --- REQUEST FORM --- */
        .req-input { width: 100%; padding: 15px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white; margin-bottom: 15px; outline: none; transition: 0.3s; }
        .req-input:focus { border-color: var(--accent-red); background: rgba(0,0,0,0.6); }
        .btn-submit { width: 100%; padding: 15px; background: var(--text-main); color: black; font-weight: 700; border: none; border-radius: 8px; cursor: none; transition: 0.3s; }
        .btn-submit:hover { background: #ccc; transform: translateY(-2px); }

        /* --- MODAL (FULL SCREEN IMMERSIVE) --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10000; align-items: center; justify-content: center; backdrop-filter: blur(20px); opacity: 0; transition: opacity 0.4s; }
        .modal-overlay.active { opacity: 1; }
        
        .modal-content { 
            width: 90%; max-width: 1400px; height: 90vh; 
            background: #080808; border-radius: 20px; 
            overflow-y: auto; position: relative; 
            border: 1px solid rgba(255,255,255,0.08);
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
            display: flex; flex-direction: column;
        }
        
        .close-btn { position: absolute; top: 20px; right: 20px; font-size: 2rem; color: #fff; opacity: 0.5; transition: 0.3s; z-index: 10; cursor: none; }
        .close-btn:hover { opacity: 1; color: var(--accent-red); transform: rotate(90deg); }

        .modal-body { padding: 40px; }
        .modal-header { margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 20px; }
        #modalTitle { font-size: 3rem; font-weight: 800; margin-bottom: 10px; color: white; letter-spacing: -1px; }
        .modal-meta { display: flex; gap: 15px; font-size: 0.9rem; color: #aaa; margin-bottom: 15px; }
        .modal-meta span { background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px; }
        #modalDesc { font-size: 1.1rem; line-height: 1.6; color: #ccc; max-width: 800px; }

        .video-container { 
            width: 100%; aspect-ratio: 16/9; background: #000; 
            border-radius: 12px; margin-top: 30px; overflow: hidden; 
            position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.05);
        }
        .video-container iframe { width: 100%; height: 100%; border: none; }
        
        .btn-download-modal { 
            margin-top: 30px; display: inline-flex; align-items: center; gap: 10px; 
            background: var(--accent-red); color: white; padding: 15px 30px; 
            border-radius: 8px; font-weight: 600; font-size: 1.1rem; transition: 0.3s;
        }
        .btn-download-modal:hover { background: #ff2a35; box-shadow: 0 0 30px rgba(229,9,20,0.4); }

        footer { text-align: center; padding: 50px; color: #555; border-top: 1px solid rgba(255,255,255,0.05); margin-top: 50px; }

        @media (max-width: 768px) {
            * { cursor: auto; } .cursor-dot, .cursor-outline { display: none; }
            header { padding: 15px; } .hero h1 { font-size: 3rem; }
            .carousel { grid-template-columns: repeat(2, 1fr); gap: 15px; }
            .modal-content { width: 100%; height: 100%; border-radius: 0; }
            .modal-body { padding: 20px; } #modalTitle { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <div class="cursor-dot" data-cursor-dot></div>
    <div class="cursor-outline" data-cursor-outline></div>
    <div class="ambient-glow"></div>

    <div class="preloader" id="preloader"><div class="loader-logo">MyMovieSite</div></div>

    <header id="header">
        <div class="logo">MyMovie<span>Site</span></div>
        <nav>
            <ul>
                <li><a href="#hero">Home</a></li>
                <li><a href="#categories">Movies</a></li>
                <li><a href="#cinema-halls">Cinemas</a></li>
            </ul>
        </nav>
        <a href="https://chat.whatsapp.com/H0XZCQ1UJ6UIQm2LLa4Qwt" class="btn-whatsapp"><i class="fab fa-whatsapp"></i> Join Group</a>
    </header>

    <section class="hero" id="hero">
        <div class="hero-bg"></div>
        <div class="hero-gradient"></div>
        <div class="hero-content">
            <h1>Unlimited Cinematic<br>Experience.</h1>
            <p>Download, stream, or find the nearest premium cinemas.</p>
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="mainSearchInput" placeholder="Search movies, genres..." onkeyup="liveSearchMovies()">
                    <button onclick="liveSearchMovies()">Search</button>
                </div>
            </div>
        </div>
    </section>

    <section id="categories" class="reveal">
        <div class="section-header"><div class="section-line"></div><h2 class="section-title">Trending Sinhala</h2></div>
        <div class="carousel" id="sinhala-movies"></div>

        <div class="section-header" style="margin-top: 80px;"><div class="section-line"></div><h2 class="section-title">Hollywood Blockbusters</h2></div>
        <div class="carousel" id="english-movies"></div>

        <div class="section-header" style="margin-top: 80px;"><div class="section-line" style="background:red;"></div><h2 class="section-title" style="color:red;">Restricted 18+</h2></div>
        <div class="carousel" id="adult-movies"></div>
    </section>

    <section id="cinema-halls" class="reveal">
        <div class="section-header"><div class="section-line" style="background:#25D366;"></div><h2 class="section-title">Find Cinemas</h2></div>
        <div class="cinema-controls">
            <button class="btn-location" onclick="locateUser()"><i class="fas fa-location-arrow"></i> Locate Me</button>
            <input type="text" id="cinemaSearchInput" class="cinema-input" placeholder="Search cinemas..." onkeyup="filterCinemas()">
        </div>
        <div id="map"></div>
        <div class="cinema-grid" id="cinemaGrid"></div>
    </section>

    <section class="reveal">
        <div class="updates-container">
            <div class="info-box">
                <h3 style="margin-bottom:20px; color:white;">Latest Updates</h3>
                <ul class="updates-list">
                    <li class="update-item"><i class="fas fa-check-circle"></i> Added 4K support for Hollywood movies.</li>
                    <li class="update-item"><i class="fas fa-server"></i> Server speed increased by 200%.</li>
                    <li class="update-item"><i class="fas fa-film"></i> New Sinhala releases updated.</li>
                </ul>
            </div>
            <div class="info-box">
                <h3 style="margin-bottom:20px; color:white;">Request Movie</h3>
                <form class="request-form" onsubmit="event.preventDefault(); alert('Request Sent!');">
                    <input type="text" class="req-input" placeholder="Movie Name" required>
                    <button type="submit" class="btn-submit">Send Request</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <p>Â© 2024 MyMovieSite Premium. Handcrafted for Movie Lovers.</p>
    </footer>

    <div class="modal-overlay" id="movieModal">
        <div class="modal-content">
            <div class="close-btn" onclick="closeModal()"><i class="fas fa-times"></i></div>
            <div class="modal-body">
                <div class="modal-header">
                    <h2 id="modalTitle">Movie Title</h2>
                    <div class="modal-meta">
                        <span id="modalYear">2024</span>
                        <span id="modalQuality" style="background:var(--accent-red); color:white;">4K UHD</span>
                        <span id="modalGenre">Action / Thriller</span>
                    </div>
                    <p id="modalDesc">Loading movie details...</p>
                </div>
                
                <div class="video-container" id="modalVideoContainer">
                    <i class="fas fa-play-circle" style="font-size:5rem; color:#fff; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); opacity:0.5;"></i>
                </div>

                <a href="#" id="modalDownloadBtn" class="btn-download-modal"><i class="fab fa-google-drive"></i> Download / Stream</a>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // --- DATA WITH DETAILS ---
        const moviesDB = {
            sinhala: [
                { name: "Super Six", image: "images/super six.jpg", link: "https://drive.google.com/file/d/1Q7eyc4h-boxuAC5-Y9BnbAVlAlmi5Dde/view?usp=sharing", year: "2012", genre: "Comedy / Romance", desc: "Six friends from a rural village dream of winning a major cricket tournament despite having no resources. A hilarious and touching story of friendship and dreams." },
                { name: "Raja Horu", image: "images/raja horu.jpg", link: "https://drive.google.com/file/d/16D1kvKFQoYW_USi2oc7IRJ24UWC8CQOr/view?usp=sharing", year: "2013", genre: "Comedy / Crime", desc: "A chaotic comedy involving a series of mistaken identities and a robbery gone wrong. Featuring popular stars in a laugh-out-loud adventure." },
                { name: "Ranja", image: "images/ranja.jpg", link: "https://drive.google.com/file/d/1sQ3n_ekXjag6ELl5XafMP6Kciq0WAwti/view?usp=sharing", year: "2014", genre: "Action / Masala", desc: "Ranjan Ramanayake stars in this high-octane action film where a hero fights against corruption and injustice to protect his people." },
                { name: "Sarigama", image: "images/sarigama.jpg", link: "https://drive.google.com/file/d/1FOFwCdOwMCM7ZK3NiGZP_CwfJfiDWQor/view?usp=sharing", year: "2016", genre: "Drama / Musical", desc: "Based on 'The Sound of Music', a young woman leaves a convent to become a governess to seven children of a wealthy widower, bringing music back into their lives." },
                { name: "Maya", image: "images/maya.jpg", link: "https://drive.google.com/file/d/16f7fKxl-E4kY2xd73K7vo36lHTdl_cO2/view?usp=sharing", year: "2016", genre: "Horror / Comedy", desc: "A 3D horror-comedy about a man possessed by the spirit of a girl named Maya, who seeks revenge for her untimely death." },
                { name: "à¶±à·’à¶¸à·’ (Nimi)", image: "images/nimi.jpg", link: "https://drive.google.com/file/d/1P_MWr6_x3FRw4eDgFrTIUGhfm6IUGHQ6/view?usp=sharing", year: "2020", genre: "Drama", desc: "A touching story about love, loss, and the complexities of human relationships in a rural setting." },
                { name: "Zoom", image: "images/zoom.jpg", link: "https://drive.google.com/file/d/1P_MWr6_x3FRw4eDgFrTIUGhfm6IUGHQ6/view?usp=sharing", year: "2015", genre: "Horror", desc: "Sri Lanka's first 3D horror movie. Two siblings find their lives in danger when a vengeful spirit haunts them." },
                { name: "à¶­à¶§à·Šà¶§à·” à¶¯à·™à¶šà·š à¶‰à·ƒà·Šà¶šà·à¶½à·š", image: "images/tattudekeiskole.jpg", link: "https://drive.google.com/file/d/1XI8lDvMu4uoNliwfQXsM0txMtr8m-RmK/view?usp=sharing", year: "2023", genre: "Drama / Family", desc: "A heartwarming tale centered around a small village school and the innocent lives of its students." },
                { name: "à¶ºà·– à¶§à¶»à·Šà¶±à·Š (U Turn)", image: "images/uturn.jpg", link: "https://drive.google.com/file/d/1qo2eI5VnS9pMdDm03rK1qzLZjPYk3ljt/view?usp=sharing", year: "2019", genre: "Mystery / Thriller", desc: "A reporter investigates accidents occurring at a specific flyover, only to find herself entangled in a web of mystery and murder." },
                { name: "à¶†à¶¯à¶»à¶«à·“à¶º à¶šà¶­à·à·€à¶šà·Š", image: "images/adaraniyakathwk.jpg", link: "https://drive.google.com/file/d/1YNbdUTS6ckKC2X3Uw03Rc1jK9v-rJjaw/view?usp=sharing", year: "2016", genre: "Musical / Romance", desc: "A musical romantic drama exploring the highs and lows of fame and love in the entertainment industry." },
                { name: "à¶¢à¶‚à¶œà·’ à·„à·œà¶»à·", image: "images/uderpantsthief.jpg", link: "https://drive.google.com/file/d/1gyu_R6oVq5IANYyH6jaWSJusBJU2mXos/view?usp=sharing", year: "2021", genre: "Thriller / Drama", desc: "A psychological thriller that delves into the dark obsessions of a man and the consequences of his actions." },
                { name: "à¶†à¶½à·š à¶šà·œà¶»à·à¶±à·", image: "images/aalecorona.jpg", link: "https://drive.google.com/file/d/179v0_uUglkGdS7yg8uITWLv2cPPamDRe/view?usp=sharing", year: "2021", genre: "Romance / Drama", desc: "A love story set against the backdrop of the COVID-19 pandemic lockdowns." },
                { name: "Ice Cream", image: "images/icecream.jpg", link: "https://drive.google.com/file/d/1zNkAmPmm0s1FrJKxnjBCMSJNPswiYP3C/view?usp=sharing", year: "2020", genre: "Comedy / Thriller", desc: "A comedic thriller involving a kidnapping gone wrong and a chaotic series of events." },
                { name: "à·ƒà·–à¶»à·’à¶ºà· (Soorya)", image: "images/soorya.jpg", link: "https://drive.google.com/file/d/1kptW9q_KMGrxoY3409ZRrP6_GD1qTPNd/view?usp=sharing", year: "2012", genre: "Action / Family", desc: "A family drama with action elements, focusing on brotherhood and family values." },
                { name: "à¶šà¶¯à·’à¶» à¶¯à·’à·€à·Šâ€à¶ºà¶»à·à¶¢", image: "images/kadira divyaraja.jpg", link: "https://drive.google.com/file/d/163ZLGCOzcJaG4SqilecAmNhjDsMiMMLO/view?usp=sharing", year: "2023", genre: "Fantasy / History", desc: "A mythological film depicting the legend of Lord Katharagama and his divine romance." },
                { name: "My Red Comrade", image: "images/my red comrade.jpg", link: "https://drive.google.com/file/d/1BwNZdWfLNSTUshO4XYRMhH5v8vYKl6-a/view?usp=sharing", year: "2024", genre: "Drama / Politics", desc: "A political drama exploring the ideological clash between two generations." },
                { name: "à¶´à·à·ƒà·Šà¶´à·à¶§à·Š", image: "images/passport.jpg", link: "https://drive.google.com/file/d/1zkbX6GOGv27_yc7AD_NTR2-jBT0QgQ_T/view?usp=sharing", year: "2024", genre: "Comedy / Drama", desc: "Two friends try to go abroad by any means necessary, leading to hilarious and touching situations." },
                { name: "à·ƒà·“à¶»à·”à·€à·™à¶±à·Š", image: "images/seeruwenn.jpg", link: "https://drive.google.com/file/d/1RlD41BF2sLUVNgMbBFYgfad0dAVG5JRG/view?usp=sharing", year: "2024", genre: "Action / Thriller", desc: "A suspenseful thriller that keeps you on the edge of your seat." },
                { name: "à·ƒà·’à·„à·’à¶± à¶±à·™à·…à·”à¶¸à·Š à¶¸à¶½à·Š", image: "images/sihina nelum mal.jpg", link: "https://drive.google.com/file/d/1z41IiHNZKk7MNSfYswpBAudHLhcCPO9o/view?usp=sharing", year: "2024", genre: "Romance", desc: "A beautiful love story blossoming amidst life's challenges." },
                { name: "à·€à·…à¶¸à·Šà¶´à·–à¶»à·’", image: "images/walampoori.jpg", link: "https://drive.google.com/file/d/1Jks1FNGYkRBzp84Wm3ecvSnfZ4CdyfJi/view?usp=sharing", year: "2024", genre: "Drama / History", desc: "A period drama centered around the mysteries of a Valampuri conch shell." },
                { name: "à¶œà·’à¶±à·’ à¶…à·€à·’ à·ƒà·„ à¶œà·’à¶±à·’ à¶šà·™à·…à·’", image: "images/gini awi saha gini keli.jpg", link: "https://drive.google.com/file/d/1ws4Sk_A81miIzlplCjlcegQxrKaczc_L/view?usp=sharing", year: "2024", genre: "Action / Gangster", desc: "A gritty look at the underworld and the violent lives of gangsters." }
            ],
            hollywood: [
                { name: "56 Days", image: "hollywood/56 days.jpg", link: "https://drive.google.com/drive/folders/1NDWZ2tB3LTsguCaUk-jfd1ghvMV5uQW9?usp=sharing", year: "2024", genre: "Thriller / Sci-Fi", desc: "A gripping thriller where a couple's lockdown romance turns into a deadly game of survival." },
                { name: "28 Years Later", image: "hollywood/28 Years Later The Bone Temple.jpg", link: "https://drive.google.com/file/d/1DwojxBuP7mM3RvhgvEFwd2xB-3y6rjeT/view?usp=sharing", year: "2025", genre: "Horror / Sci-Fi", desc: "The long-awaited sequel to 28 Days Later. The virus has evolved, and humanity's last survivors face a new terror." },
                { name: "Anaconda", image: "hollywood/anaconda.jpg", link: "https://drive.google.com/file/d/1EnxzyZB1OW6S1p1GiL5zF7jvAPYe6B7d/view?usp=sharing", year: "2024", genre: "Action / Horror", desc: "A remake of the classic creature feature. A film crew in the Amazon is hunted by a massive, genetically enhanced snake." },
                { name: "Bad Teacher", image: "hollywood/bad teacher.jpg", link: "https://drive.google.com/file/d/1epHpEJMGEB7HQtsn3xkiLEbJ6Cxijcb9/view?usp=sharing", year: "2011", genre: "Comedy", desc: "A foul-mouthed, junior high teacher tries to woo a rich colleague after being dumped by her sugar daddy." },
                { name: "Christy", image: "hollywood/christy.jpg", link: "https://drive.google.com/file/d/1gr4TIXBjDtHXbn7P3s4Kpe2SDCnAv_88/view?usp=sharing", year: "2024", genre: "Drama", desc: "A powerful drama about a young woman navigating life's hardships in a changing world." },
                { name: "I Swear", image: "hollywood/i swear.jpg", link: "https://drive.google.com/file/d/1HxEFFWLlEj1b2SIeHDx24H8wbc8x7SLZ/view?usp=sharing", year: "2024", genre: "Drama / Romance", desc: "A deeply emotional story about promises made and broken." },
                { name: "Im Still Here", image: "hollywood/im still here.jpg", link: "https://drive.google.com/file/d/1A2LgH9-XPG1SK8xYGGbAZUNqlY7DELN2/view?usp=sharing", year: "2024", genre: "Documentary / Biography", desc: "An intimate look into the life of a fading star trying to reclaim their legacy." },
                { name: "Sisu", image: "hollywood/sisu road to revenge.jpg", link: "https://drive.google.com/file/d/1E4FvU8NH44xJxhTGCIzlyMsurf-Rzf3f/view?usp=sharing", year: "2023", genre: "Action / War", desc: "During WWII, a solitary prospector crosses paths with Nazis on a scorched-earth retreat in northern Finland." },
                { name: "Tron: Ares", image: "hollywood/tron areas.jpg", link: "https://drive.google.com/file/d/1qBch57C3un6RmKd1I1Gm6yh9R7rlYLKp/view?usp=sharing", year: "2025", genre: "Sci-Fi / Action", desc: "A sophisticated program, Ares, is sent from the digital world into the real world on a dangerous mission." },
                { name: "Wake Up Dead Man", image: "hollywood/wakeup dead man.jpg", link: "https://drive.google.com/file/d/1DMnvsxfp_1cpzM07sW1OcO5OsxNLkG3q/view?usp=sharing", year: "2025", genre: "Mystery / Crime", desc: "Benoit Blanc returns to solve his most dangerous case yet in the third Knives Out mystery." },
                { name: "Marty Supreme", image: "hollywood/Marty Supreme.jpg", link: "https://drive.google.com/file/d/1YW58oA0zBc7m2nODDANj52HJ3j_Xluox/view?usp=sharing", year: "2024", genre: "Drama / Sport", desc: "A biographical drama about a legendary ping pong player's rise to fame." }
            ],
            adult: [
                { name: "Belle de Jour", image: "adult/Belle de Jour.jpg", link: "https://drive.google.com/file/d/1PM4AIVa1e3mbUybHwLgkG1Ozz9jJcu-D/view?usp=sharing", year: "1967", genre: "Drama / Romance", desc: "A beautiful young housewife decides to spend her midweek afternoons working at a high-class brothel." },
                { name: "Great Expectations", image: "adult/Great ExpectatioNs.jpg", link: "https://drive.google.com/file/d/17Bqn36gg9cln7PueeGt0W7spc6m6PhSy/view?usp=sharing", year: "1998", genre: "Drama / Romance", desc: "Modern retelling of Dickens' classic tale of a young man's unrequited love for a cold-hearted beauty." },
                { name: "Henry & June", image: "adult/Henry & June.jpg", link: "#", year: "1990", genre: "Biography / Drama", desc: "The story of AnaÃ¯s Nin's relationship with Henry Miller and his wife June in Paris." },
                { name: "House of Tolerance", image: "adult/House of Tolerance.jpg", link: "#", year: "2011", genre: "Drama", desc: "A look at the final days of a Parisian brothel at the dawn of the 20th century." },
                { name: "Ligaw", image: "adult/Ligaw.jpg", link: "https://drive.google.com/file/d/1tbumuzYj4xbF3BeRIJ5ZlR05paV3rrpl/view?usp=sharing", year: "2023", genre: "Drama / Thriller", desc: "A tale of lost souls finding connection in unexpected places." },
                { name: "Love at the Top", image: "adult/Love at the Top.jpg", link: "#", year: "1974", genre: "Drama / Comedy", desc: "A man uses his charm to climb the social ladder in Paris." },
                { name: "Night Nurse", image: "adult/Night Nurse.jpg", link: "https://drive.google.com/file/d/1u0GKsNipK98x6aNsaCCntWyrs6NYfgyG/view?usp=sharing", year: "1978", genre: "Thriller", desc: "A nurse uncovers dark secrets while caring for a patient." },
                { name: "Rapsa", image: "adult/Rapsa.jpg", link: "#", year: "2023", genre: "Drama", desc: "A story of passion and betrayal." },
                { name: "Sabik", image: "adult/Sabik.jpg", link: "#", year: "2022", genre: "Drama", desc: "Desire leads to dangerous consequences." },
                { name: "So Young, So Lovely", image: "adult/So Young, So Lovely, So Vicious.jpg", link: "#", year: "1975", genre: "Drama", desc: "A tragic tale of youth and beauty corrupted." },
                { name: "Story of O", image: "adult/The Sexual Story of O.jpg", link: "#", year: "1975", genre: "Drama", desc: "A photographer takes his lover to a chÃ¢teau where she is trained to be the ideal submissive." },
                { name: "Uncle Tom Cabin", image: "adult/Uncle Tom Cabin.jpg", link: "#", year: "1977", genre: "Drama", desc: "A controversial adaptation of the classic novel." }
            ]
        };

        // --- RENDER FUNCTIONS ---
        function renderCategory(catName, containerId, isAdult = false) {
            const container = document.getElementById(containerId);
            let html = '';
            moviesDB[catName].forEach((movie, index) => {
                const warning = isAdult ? `<div class="adult-warning"><i class="fas fa-lock"></i> 18+</div>` : '';
                const blurClass = isAdult ? 'style="filter: blur(5px) brightness(0.7);"' : '';
                const quality = ["4K UHD", "1080p", "BluRay"].sort(() => 0.5 - Math.random())[0];
                const rating = (Math.random() * (9.5 - 6.0) + 6.0).toFixed(1);

                html += `
                    <div class="movie-card" onclick="openModal('${catName}', ${index})">
                        <div class="badges">
                            <span class="badge"><i class="fas fa-star" style="color:gold"></i> ${rating}</span>
                            <span class="badge quality">${quality}</span>
                        </div>
                        ${warning}
                        <img src="${movie.image}" alt="${movie.name}" ${blurClass} onerror="this.src='https://via.placeholder.com/300x450/111/fff?text=No+Image'">
                        <div class="play-overlay"><div class="play-btn-icon"><i class="fas fa-play" style="margin-left:4px;"></i></div></div>
                        <div class="movie-info">
                            <h4>${movie.name}</h4>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
            initTilt();
        }

        renderCategory('sinhala', 'sinhala-movies');
        renderCategory('hollywood', 'english-movies');
        renderCategory('adult', 'adult-movies', true);

        // --- ðŸª„ MAGIC CURSOR ---
        const cursorDot = document.querySelector(".cursor-dot");
        const cursorOutline = document.querySelector(".cursor-outline");
        window.addEventListener("mousemove", (e) => {
            cursorDot.style.left = `${e.clientX}px`; cursorDot.style.top = `${e.clientY}px`;
            cursorOutline.animate({ left: `${e.clientX}px`, top: `${e.clientY}px` }, { duration: 500, fill: "forwards" });
        });
        document.querySelectorAll('a, button, .movie-card, input').forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
        });

        // --- 3D TILT ---
        function initTilt() {
            document.querySelectorAll('.movie-card').forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = (e.clientX - rect.left) / rect.width - 0.5;
                    const y = (e.clientY - rect.top) / rect.height - 0.5;
                    card.style.transform = `perspective(1000px) rotateY(${x * 20}deg) rotateX(${y * -20}deg) scale3d(1.05, 1.05, 1.05)`;
                });
                card.addEventListener('mouseleave', () => {
                    card.style.transform = `perspective(1000px) rotateY(0) rotateX(0) scale3d(1, 1, 1)`;
                });
            });
        }

        // --- PRELOADER ---
        window.onload = () => { setTimeout(() => { document.getElementById('preloader').style.opacity = '0'; setTimeout(()=>document.getElementById('preloader').style.display='none',500); }, 800); initMap(); };

        // --- SCROLL REVEAL ---
        window.addEventListener('scroll', () => {
            document.getElementById('header').classList.toggle('scrolled', window.scrollY > 50);
            document.querySelectorAll('.reveal').forEach(r => {
                if(r.getBoundingClientRect().top < window.innerHeight - 100) r.classList.add('active');
            });
        });

        // --- MODAL LOGIC (FULL SCREEN & DETAILS) ---
        const modal = document.getElementById('movieModal');
        
        function openModal(category, index) {
            const movie = moviesDB[category][index];
            
            // Populate Details
            document.getElementById('modalTitle').innerText = movie.name;
            document.getElementById('modalYear').innerText = movie.year || "2024";
            document.getElementById('modalGenre').innerText = movie.genre || "Drama / Action";
            document.getElementById('modalDesc').innerText = movie.desc || "Experience this amazing movie in high quality. Join our premium group for more exclusive content.";
            
            const btn = document.getElementById('modalDownloadBtn');
            const videoContainer = document.getElementById('modalVideoContainer');
            
            btn.href = movie.link;
            
            if(movie.link === '#' || !movie.link) {
                btn.onclick = (e) => { e.preventDefault(); alert('Link coming soon!'); };
                videoContainer.innerHTML = '<i class="fas fa-play-circle" style="font-size:5rem; color:#fff; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); opacity:0.5;"></i>';
            } else {
                btn.onclick = null; btn.target = '_blank';
                
                // Smart Link Handling (Folder vs File)
                if(movie.link.includes('folder')) {
                     videoContainer.innerHTML = `<div style="display:flex; justify-content:center; align-items:center; height:100%; color:#aaa;"><i class="fas fa-folder-open" style="font-size:3rem; margin-right:15px;"></i> <span>This is a Series/Collection. Click Download to open folder.</span></div>`;
                } else {
                    const fileId = movie.link.match(/[-\w]{25,}/);
                    if(fileId) {
                        videoContainer.innerHTML = `<iframe src="https://drive.google.com/file/d/${fileId[0]}/preview" allow="autoplay; fullscreen" style="width:100%; height:100%; border:none;"></iframe>`;
                    } else {
                        videoContainer.innerHTML = '<i class="fas fa-play-circle" style="font-size:5rem; color:#fff;"></i>';
                    }
                }
            }
            
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('active'), 10);
        }

        function closeModal() {
            modal.classList.remove('active');
            setTimeout(() => { 
                modal.style.display = 'none'; 
                document.getElementById('modalVideoContainer').innerHTML = ''; // Stop video
            }, 400);
        }

        // --- MAP & SEARCH ---
        function liveSearchMovies() {
            const val = document.getElementById('mainSearchInput').value.toLowerCase();
            document.querySelectorAll('.movie-card').forEach(card => {
                const title = card.querySelector('h4').innerText.toLowerCase();
                card.style.display = title.includes(val) ? 'block' : 'none';
            });
        }

        // Dummy Map Logic
        function initMap() {
            const map = L.map('map').setView([7.87, 80.77], 7);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);
        }
    </script>
</body>
</html>
