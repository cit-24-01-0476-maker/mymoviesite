<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyMovieSite - Ultra Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        /* --- ULTRA PREMIUM CSS VARIABLES & RESET --- */
        :root {
            --bg-color: #050505;
            --bg-secondary: #0f0f0f;
            --text-main: #ffffff;
            --text-muted: #a3a3a3;
            --accent-red: #ff0f1f; /* Brighter Neon Red */
            --accent-red-dim: #b80710;
            --accent-green: #00ff6a;
            --glass-bg: rgba(20, 20, 20, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
            --smooth-curve: cubic-bezier(0.25, 1, 0.5, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; cursor: none; }
        
        body { 
            background-color: var(--bg-color); 
            color: var(--text-main); 
            overflow-x: hidden; 
            width: 100%;
        }
        
        a { text-decoration: none; color: inherit; transition: 0.3s var(--smooth-curve); }

        /* --- ðŸª„ MAGIC CURSOR --- */
        .cursor-dot, .cursor-outline { position: fixed; top: 0; left: 0; transform: translate(-50%, -50%); border-radius: 50%; z-index: 9999; pointer-events: none; }
        .cursor-dot { width: 8px; height: 8px; background-color: var(--accent-red); box-shadow: 0 0 10px var(--accent-red); }
        .cursor-outline { width: 45px; height: 45px; border: 2px solid rgba(255, 15, 31, 0.5); transition: width 0.2s, height 0.2s, background-color 0.2s; }
        body.hovering .cursor-outline { width: 75px; height: 75px; background-color: rgba(255, 15, 31, 0.15); border-color: var(--accent-red); mix-blend-mode: screen; box-shadow: 0 0 30px rgba(255, 15, 31, 0.3); }

        /* --- PREMIUM SCROLLBAR --- */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-red); }

        /* --- AMBIENT BACKGROUND GLOW --- */
        body::before {
            content: ''; position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle at 50% 50%, rgba(255, 15, 31, 0.04), transparent 60%);
            z-index: -1; pointer-events: none; animation: pulse-glow 8s infinite alternate;
        }
        @keyframes pulse-glow { 0% { transform: scale(1); opacity: 0.3; } 100% { transform: scale(1.1); opacity: 0.7; } }

        /* --- PRELOADER --- */
        .preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: var(--bg-color); z-index: 9999; display: flex; justify-content: center; align-items: center; transition: opacity 0.6s ease; }
        .loader-ring { width: 60px; height: 60px; border: 3px solid rgba(255, 15, 31, 0.1); border-top: 3px solid var(--accent-red); border-radius: 50%; animation: spin 1s linear infinite; box-shadow: 0 0 30px rgba(255, 15, 31, 0.6); }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- HEADER --- */
        header { position: fixed; top: 0; width: 100%; padding: 25px 4%; display: flex; justify-content: space-between; align-items: center; z-index: 100; transition: all 0.5s var(--smooth-curve); background: transparent; }
        header.scrolled { 
            background: rgba(5, 5, 5, 0.9); 
            backdrop-filter: blur(25px); 
            -webkit-backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--glass-border); 
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.9);
            padding: 15px 4%; 
        }
        .logo { font-size: 2.2rem; font-weight: 800; color: var(--accent-red); letter-spacing: -1px; transition: 0.3s; cursor: none; text-shadow: 0 0 20px rgba(255, 15, 31, 0.5); }
        .logo span { color: white; }
        
        nav ul { display: flex; list-style: none; gap: 40px; }
        nav ul li a { font-size: 1rem; font-weight: 500; position: relative; padding-bottom: 5px; color: #b3b3b3; transition: color 0.3s; cursor: none; }
        nav ul li a::after { content: ''; position: absolute; left: 0; bottom: 0; width: 0; height: 2px; background: var(--accent-red); transition: width 0.3s var(--smooth-curve); box-shadow: 0 0 10px var(--accent-red); }
        nav ul li a:hover { color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        nav ul li a:hover::after { width: 100%; }
        
        .btn-whatsapp { background: rgba(30, 215, 96, 0.1); color: var(--accent-green); padding: 10px 24px; border-radius: 30px; font-weight: 600; display: flex; align-items: center; gap: 8px; border: 1px solid rgba(30, 215, 96, 0.4); transition: all 0.3s var(--smooth-curve); backdrop-filter: blur(10px); cursor: none; box-shadow: 0 0 15px rgba(30, 215, 96, 0.1); }
        .btn-whatsapp:hover { background: var(--accent-green); color: #000; transform: translateY(-2px); box-shadow: 0 0 30px rgba(30, 215, 96, 0.6); border-color: var(--accent-green); }

        /* --- HERO SECTION --- */
        .hero-bg-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 0; }
        .hero-bg { 
            width: 100%; height: 100%; 
            background: url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat; 
            animation: slowZoom 25s linear infinite alternate; 
        }
        @keyframes slowZoom { 0% { transform: scale(1); } 100% { transform: scale(1.15); } }
        
        .hero { height: 100vh; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 0 20px; position: relative; }
        .hero::before { content:''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(5,5,5,0.8) 0%, rgba(5,5,5,0.5) 50%, var(--bg-color) 100%); z-index: 1; }
        
        .particles { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        .particle { position: absolute; background: rgba(255,255,255,0.3); border-radius: 50%; animation: floatUp linear infinite; }
        @keyframes floatUp { 0% { transform: translateY(100vh) scale(0); opacity: 0; } 50% { opacity: 0.8; } 100% { transform: translateY(-10vh) scale(1.5); opacity: 0; } }

        .hero-content { z-index: 2; width: 100%; max-width: 1200px; display: flex; flex-direction: column; align-items: center; animation: fadeInUp 1.2s var(--smooth-curve); }
        @keyframes fadeInUp { 0% { opacity: 0; transform: translateY(40px); } 100% { opacity: 1; transform: translateY(0); } }
        
        /* ðŸš¨ NEW: Animated Hero Text ðŸš¨ */
        .hero h1 { 
            font-size: 5.5rem; font-weight: 800; margin-bottom: 20px; line-height: 1.1; letter-spacing: -2px; 
            background: linear-gradient(to right, #fff, #a0a0a0, #fff);
            background-size: 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: textShine 5s linear infinite;
            text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        @keyframes textShine { 0% { background-position: 0%; } 100% { background-position: 200%; } }
        
        .hero p { font-size: 1.3rem; color: #ccc; margin-bottom: 45px; font-weight: 400; text-shadow: 0 2px 10px rgba(0,0,0,0.8); max-width: 700px; }
        
        /* --- SEARCH BAR --- */
        .search-bar { 
            display: flex; width: 100%; max-width: 750px; 
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 50px; overflow: hidden; 
            transition: all 0.4s var(--smooth-curve); 
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
        }
        .search-bar:focus-within { 
            transform: scale(1.03); 
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-red);
            box-shadow: 0 0 30px rgba(255, 15, 31, 0.3); 
        }
        .search-bar input { flex: 1; padding: 22px 35px; border: none; background: transparent; color: white; font-size: 1.1rem; outline: none; font-weight: 400; cursor: none; }
        .search-bar button { padding: 0 45px; background: var(--accent-red); color: white; border: none; font-size: 1.1rem; cursor: none; font-weight: 600; transition: 0.3s; display: flex; align-items: center; gap: 8px; }
        .search-bar button:hover { background: #ff4d5a; box-shadow: 0 0 20px rgba(255, 15, 31, 0.6); }

        /* --- SECTIONS --- */
        .reveal { opacity: 0; transform: translateY(40px); transition: all 0.8s var(--smooth-curve); }
        .reveal.active { opacity: 1; transform: translateY(0); }

        section { padding: 80px 4%; position: relative; z-index: 2; width: 100%; }
        .section-title { 
            font-size: 2.2rem; font-weight: 800; margin-bottom: 40px; display: flex; align-items: center; gap: 15px; letter-spacing: -0.5px; 
            border-left: 5px solid var(--accent-red); padding-left: 20px; 
            text-shadow: 0 0 20px rgba(255, 15, 31, 0.2);
        }
        .section-title i { color: var(--accent-red); font-size: 2.2rem; filter: drop-shadow(0 0 10px var(--accent-red)); }
        
        .carousel { display: grid; grid-template-columns: repeat(auto-fill, minmax(230px, 1fr)); gap: 25px; padding-bottom: 30px; width: 100%; }

        /* --- ðŸš¨ ULTRA PREMIUM MOVIE CARD ðŸš¨ --- */
        .movie-card { 
            width: 100%; cursor: none; position: relative; border-radius: 16px; overflow: hidden; 
            background: #111; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.6); 
            transform-style: preserve-3d; 
            perspective: 1000px; 
            transition: transform 0.2s ease-out, box-shadow 0.3s ease;
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        .movie-card img { width: 100%; height: 350px; object-fit: cover; transition: transform 0.6s ease; }
        
        /* ðŸš¨ LIVE EFFECT: CONTINUOUS SHINE (Light Beam) ðŸš¨ */
        @keyframes sheen {
            0% { left: -100%; opacity: 0; }
            5% { opacity: 0.3; }
            50% { opacity: 0; left: 200%; }
            100% { left: 200%; opacity: 0; }
        }
        .movie-card::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.4), transparent);
            transform: skewX(-25deg);
            z-index: 10; pointer-events: none;
            animation: sheen 4s infinite ease-in-out; /* Runs every 4 seconds */
        }

        /* ðŸš¨ LIVE EFFECT: HOVER PULSE BORDER ðŸš¨ */
        .movie-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0,0,0,0.9), 0 0 20px rgba(255, 15, 31, 0.4); /* Neon Glow */
            border-color: rgba(255, 15, 31, 0.5);
            z-index: 10;
        }
        .movie-card:hover img { transform: scale(1.15); filter: brightness(0.4) contrast(1.1); }

        .card-tags { position: absolute; top: 12px; left: 12px; display: flex; flex-direction: column; gap: 6px; z-index: 4; transform: translateZ(30px); }
        .tag-rating { background: rgba(0, 0, 0, 0.8); color: #fff; font-size: 0.8rem; font-weight: 700; padding: 5px 10px; border-radius: 6px; backdrop-filter: blur(8px); border: 1px solid rgba(255,215,0,0.3); display: flex; align-items: center; gap: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        .tag-rating i { color: #f5c518; }
        .tag-quality { background: var(--accent-red); color: white; font-size: 0.7rem; font-weight: 800; padding: 4px 8px; border-radius: 6px; text-transform: uppercase; box-shadow: 0 0 15px rgba(255, 15, 31, 0.5); letter-spacing: 1px; text-align: center; }

        .play-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease; z-index: 6; transform: translateZ(40px); }
        .movie-card:hover .play-overlay { opacity: 1; }
        .play-btn-icon { width: 70px; height: 70px; background: rgba(255, 15, 31, 0.9); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-size: 1.8rem; box-shadow: 0 0 40px rgba(255, 15, 31, 0.8); backdrop-filter: blur(5px); transition: transform 0.3s var(--smooth-curve); }
        .movie-card:hover .play-btn-icon { transform: scale(1.1) rotate(10deg); }
        
        .movie-card h4 { position: absolute; bottom: 0; left: 0; width: 100%; padding: 50px 15px 20px; background: linear-gradient(to top, rgba(0,0,0,1), transparent); font-size: 1.15rem; font-weight: 700; text-align: center; z-index: 3; color: #fff; letter-spacing: 0.5px; transform: translateZ(20px); text-shadow: 0 2px 10px rgba(0,0,0,0.8); }
        
        .adult-warning { position: absolute; top: 12px; right: 12px; background: rgba(0,0,0,0.85); color: var(--accent-red); font-size: 0.75rem; font-weight: 800; padding: 5px 10px; border-radius: 6px; z-index: 4; border: 1px solid var(--accent-red); backdrop-filter: blur(5px); transform: translateZ(30px); box-shadow: 0 0 15px rgba(255, 15, 31, 0.3); }

        /* --- CINEMA & UPDATES --- */
        .cinema-controls { display: flex; gap: 20px; margin-bottom: 30px; }
        .btn-location { background: rgba(255,255,255,0.05); color: white; padding: 0 35px; border: 1px solid rgba(255,255,255,0.1); border-radius: 30px; font-weight: 600; cursor: none; transition: all 0.3s ease; display: flex; align-items: center; gap: 10px; backdrop-filter: blur(10px); }
        .btn-location:hover { background: rgba(255,255,255,0.1); border-color: white; transform: translateY(-3px); box-shadow: 0 0 20px rgba(255,255,255,0.1); }
        .cinema-search-input { flex: 1; padding: 18px 30px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); background: rgba(10,10,10,0.6); color: white; font-size: 1.05rem; outline: none; transition: 0.3s; backdrop-filter: blur(10px); cursor: none; }
        .cinema-search-input:focus { border-color: var(--accent-red); background: rgba(20,20,20,0.9); box-shadow: 0 0 25px rgba(255, 15, 31, 0.2); }
        #map { height: 450px; width: 100%; border-radius: 20px; margin-top: 20px; z-index: 1; border: 1px solid var(--glass-border); display: block !important; box-shadow: 0 20px 60px rgba(0,0,0,0.8); }
        .leaflet-popup-content-wrapper { background: rgba(10,10,10,0.95); backdrop-filter: blur(10px); color: white; border-radius: 12px; border: 1px solid var(--accent-red); }
        .leaflet-popup-tip { background: #0f0f0f; border: 1px solid var(--accent-red); }
        .cinema-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; margin-top: 35px; }
        .cinema-box { background: rgba(20,20,20,0.6); backdrop-filter: blur(20px); padding: 30px; border-radius: 16px; border: 1px solid var(--glass-border); transition: all 0.4s ease; position: relative; overflow: hidden; cursor: none; }
        .cinema-box:hover { transform: translateY(-8px); background: rgba(30,30,30,0.9); border-color: var(--accent-red); box-shadow: 0 0 30px rgba(255, 15, 31, 0.15); }
        .cinema-box h3 { font-size: 1.3rem; color: white; margin-bottom: 12px; display: flex; align-items: center; gap: 10px; font-weight: 700; }
        .cinema-box h3 i { color: var(--accent-red); text-shadow: 0 0 10px var(--accent-red); }
        .cinema-box p { font-size: 0.95rem; color: #aaa; margin-bottom: 8px; display: flex; align-items: center; gap: 10px; }
        .cinema-box .distance { display: inline-block; margin-top: 15px; padding: 6px 18px; background: rgba(0, 255, 106, 0.1); color: var(--accent-green); border-radius: 20px; font-weight: 700; font-size: 0.9rem; border: 1px solid rgba(0, 255, 106, 0.3); box-shadow: 0 0 10px rgba(0, 255, 106, 0.1); }

        .flex-container { display: flex; gap: 40px; flex-wrap: wrap; }
        .updates-box, .request-box { flex: 1; min-width: 320px; background: rgba(20,20,20,0.6); backdrop-filter: blur(20px); padding: 40px; border-radius: 20px; border: 1px solid var(--glass-border); box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .updates-list li { list-style: none; padding: 18px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 1rem; display: flex; align-items: center; gap: 15px; color: #ddd; transition: 0.3s; }
        .updates-list li:hover { padding-left: 10px; color: white; text-shadow: 0 0 5px rgba(255,255,255,0.5); }
        .updates-list li i { color: var(--accent-red); font-size: 1.3rem; filter: drop-shadow(0 0 5px var(--accent-red)); }
        
        .request-form { display: flex; flex-direction: column; gap: 20px; }
        .request-form input { padding: 18px 25px; border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; background: rgba(0,0,0,0.4); color: white; outline: none; transition: 0.3s; font-size: 1.05rem; cursor: none; }
        .request-form input:focus { border-color: var(--accent-red); background: rgba(0,0,0,0.8); box-shadow: 0 0 15px rgba(255, 15, 31, 0.2); }
        .request-form button { padding: 18px; background: var(--text-main); color: var(--bg-color); border: none; border-radius: 12px; font-weight: 700; font-size: 1.1rem; cursor: none; transition: 0.3s ease; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .request-form button:hover { background: #fff; transform: translateY(-3px); box-shadow: 0 0 20px rgba(255,255,255,0.4); }

        /* --- MODAL --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 1000; justify-content: center; align-items: center; backdrop-filter: blur(30px); opacity: 0; transition: opacity 0.4s var(--smooth-curve); }
        .modal-content { background: #0a0a0a; width: 95%; max-width: 1100px; border-radius: 20px; padding: 40px; position: relative; transform: scale(0.9) translateY(30px); transition: all 0.4s var(--smooth-curve); border: 1px solid rgba(255,255,255,0.08); box-shadow: 0 50px 100px rgba(0,0,0,1); }
        .modal-overlay.active { opacity: 1; }
        .modal-overlay.active .modal-content { transform: scale(1) translateY(0); }
        .close-btn { position: absolute; top: 25px; right: 25px; font-size: 2rem; cursor: none; color: #888; transition: all 0.3s; width: 45px; height: 45px; display: flex; justify-content: center; align-items: center; border-radius: 50%; background: rgba(255,255,255,0.05); }
        .close-btn:hover { color: white; background: var(--accent-red); transform: rotate(90deg); box-shadow: 0 0 20px var(--accent-red); }
        
        #modalTitle { font-size: 2.8rem; font-weight: 800; margin-bottom: 5px; letter-spacing: -1px; background: linear-gradient(45deg, #fff, #bbb); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        
        .trailer-placeholder { width: 100%; height: 550px; background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.9)), url('https://images.unsplash.com/photo-1485846234645-a62644f84728?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80') center/cover; display: flex; justify-content: center; align-items: center; border-radius: 16px; margin: 30px 0; position: relative; box-shadow: inset 0 0 150px rgba(0,0,0,0.9), 0 30px 60px rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.05); overflow: hidden; }
        .trailer-placeholder i { font-size: 7rem; color: rgba(255,255,255,0.8); z-index: 2; cursor: none; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); filter: drop-shadow(0 0 30px rgba(0,0,0,0.8)); }
        .trailer-placeholder i:hover { transform: scale(1.2); color: var(--accent-red); filter: drop-shadow(0 0 50px var(--accent-red)); }
        
        .btn-download { display: flex; justify-content: center; align-items: center; gap: 12px; background: rgba(255,255,255,0.08); color: white; padding: 22px; border-radius: 12px; font-weight: 600; font-size: 1.2rem; transition: all 0.3s; border: 1px solid rgba(255,255,255,0.1); cursor: none; }
        .btn-download:hover { background: rgba(255,255,255,0.15); border-color: white; transform: translateY(-3px); box-shadow: 0 0 30px rgba(255,255,255,0.15); }

        footer { text-align: center; padding: 60px 20px; background: #020202; color: #555; font-size: 0.9rem; margin-top: 80px; border-top: 1px solid rgba(255,255,255,0.05); }
        
        /* --- MOBILE RESPONSIVE FIXES --- */
        @media (max-width: 768px) {
            * { cursor: auto; } .cursor-dot, .cursor-outline { display: none; }
            header { padding: 15px 5%; } header.scrolled { padding: 10px 5%; }
            .logo { font-size: 1.8rem; } .btn-whatsapp { padding: 8px 16px; font-size: 0.9rem; } nav ul { display: none; }
            section { padding: 50px 5%; } .section-title { font-size: 1.5rem; margin-bottom: 25px; border-left-width: 4px; }
            .hero h1 { font-size: 2.8rem; } .hero p { font-size: 1rem; margin-bottom: 30px; padding: 0 10px; }
            .search-bar { border-radius: 20px; flex-direction: column; background: transparent; box-shadow: none; border: none; }
            .search-bar input { border-radius: 15px; margin-bottom: 12px; background: rgba(255,255,255,0.08); padding: 18px 20px; font-size: 1rem; border: 1px solid rgba(255,255,255,0.1); }
            .search-bar button { border-radius: 15px; padding: 18px; font-size: 1.1rem; justify-content: center; }
            .carousel { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }
            .movie-card img { height: 230px; } .movie-card h4 { font-size: 0.9rem; padding: 20px 10px 10px; bottom: -45px; }
            .cinema-controls { flex-direction: column; gap: 15px; } .btn-location { padding: 18px; font-size: 1rem; justify-content: center; border-radius: 15px; width: 100%; } .cinema-search-input { padding: 18px; font-size: 1rem; border-radius: 15px; width: 100%; }
            #map { height: 320px; border-radius: 15px; } .cinema-grid { grid-template-columns: 1fr; gap: 20px; }
            .flex-container { gap: 25px; flex-direction: column; } .updates-box, .request-box { padding: 30px 20px; border-radius: 15px; }
            .modal-content { padding: 30px 20px; width: 95%; border-radius: 20px; } #modalTitle { font-size: 1.8rem; } .close-btn { top: 15px; right: 15px; width: 30px; height: 30px; font-size: 1.3rem; } .trailer-placeholder { height: 250px; margin: 20px 0; border-radius: 12px; } .trailer-placeholder i { font-size: 4rem; } .btn-download { padding: 18px; font-size: 1.1rem; border-radius: 12px; }
        }
    </style>
</head>
<body>

    <div class="cursor-dot" data-cursor-dot></div>
    <div class="cursor-outline" data-cursor-outline></div>

    <div class="preloader" id="preloader"><div class="loader-ring"></div></div>

    <header id="header">
        <div class="logo">MyMovie<span style="color:white;">Site</span></div>
        <nav>
            <ul>
                <li><a href="#hero">Home</a></li>
                <li><a href="#categories">Movies</a></li>
                <li><a href="#kdrama">K-Dramas</a></li> <li><a href="#cinema-halls">Cinemas</a></li>
                <li><a href="#updates">Updates</a></li>
            </ul>
        </nav>
        <a href="https://chat.whatsapp.com/H0XZCQ1UJ6UIQm2LLa4Qwt" target="_blank" class="btn-whatsapp"><i class="fab fa-whatsapp" style="font-size:1.3rem;"></i> Join Group</a>
    </header>

    <section class="hero" id="hero">
        <div class="hero-bg-container"><div class="hero-bg"></div></div>
        <div class="particles" id="particles"></div>
        <div class="hero-content">
            <h1>Unlimited Cinematic<br>Experience.</h1>
            <p>Download, stream, or find the nearest premium cinemas.</p>
            <div class="search-bar">
                <input type="text" id="mainSearchInput" placeholder="Search for movies, TV shows, or genres..." onkeyup="liveSearchMovies()">
                <button onclick="liveSearchMovies()"><i class="fas fa-search"></i> Search</button>
            </div>
        </div>
    </section>

    <section id="categories" class="reveal">
        <div class="section-title"><i class="fas fa-film"></i> Trending Sinhala</div>
        <div class="carousel" id="sinhala-movies"></div>

        <div class="section-title" style="margin-top: 80px;"><i class="fas fa-globe"></i> Hollywood Blockbusters</div>
        <div class="carousel" id="english-movies"></div>

        <div id="kdrama" class="section-title" style="margin-top: 80px;"><i class="fas fa-tv" style="color: #e50914;"></i> Trending K-Dramas</div>
        <div class="carousel" id="kdrama-movies"></div>

        <div class="section-title" style="color: var(--accent-red); margin-top: 80px;"><i class="fas fa-exclamation-triangle"></i> Restricted 18+</div>
        <div class="carousel" id="adult-movies"></div>
    </section>

    <section id="cinema-halls" class="reveal">
        <h2 class="section-title"><i class="fas fa-map-marker-alt"></i> Find Cinemas In Sri Lanka</h2>
        <div class="cinema-controls">
            <button class="btn-location" id="btnLocation" onclick="locateUser()"><i class="fas fa-location-arrow"></i> Find My Location</button>
            <input type="text" id="cinemaSearchInput" class="cinema-search-input" placeholder="Search by hall name or city..." onkeyup="filterCinemas()">
        </div>
        
        <div id="map"></div>
        <div class="cinema-grid" id="cinemaGrid"></div>
    </section>

    <section class="reveal">
        <div class="flex-container">
            <div class="updates-box" id="updates">
                <h2 class="section-title"><i class="fas fa-bell"></i> Latest Updates</h2>
                <ul class="updates-list">
                    <li><i class="fas fa-check-circle"></i> High Quality 4K rips added to English category.</li>
                    <li><i class="fas fa-tools"></i> Server 2 speed optimization complete.</li>
                    <li><i class="fas fa-ticket-alt"></i> Islandwide Cinema timings updated.</li>
                </ul>
            </div>
            <div class="request-box" id="request">
                <h2 class="section-title"><i class="fas fa-paper-plane"></i> Request a Movie</h2>
                <form class="request-form" id="movieRequestForm" onsubmit="submitMovieRequest(event)">
                    <input type="text" id="reqMovieName" placeholder="Movie Name (e.g. Avatar)" required>
                    <input type="number" id="reqMovieYear" placeholder="Release Year (Optional)">
                    <button type="submit" id="reqSubmitBtn">Submit Request <i class="fas fa-paper-plane"></i></button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <p>Â© 2024 MyMovieSite Premium. Handcrafted for Movie Lovers in Sri Lanka.</p>
    </footer>

    <div class="modal-overlay" id="movieModal">
        <div class="modal-content">
            <div class="close-btn" onclick="closeModal()"><i class="fas fa-times"></i></div>
            <h2 id="modalTitle">Movie Title</h2>
            <p style="color: var(--accent-red); margin-bottom: 25px; font-weight: 600; letter-spacing: 2px; font-size: 0.95rem;">2024 â€¢ PREMIUM RIP â€¢ 4K UHD</p>
            <p style="font-size: 1.1rem; line-height: 1.8; color: #ccc; margin-bottom: 30px;"><strong>Synopsis:</strong> An epic journey through space and time to save humanity from the brink of extinction. Featuring breathtaking visuals and heart-pounding action sequences.</p>
            
            <div class="trailer-placeholder" id="modalVideoContainer">
                <i class="fas fa-play-circle"></i>
            </div>
            
            <a href="#" id="modalDownloadBtn" class="btn-download"><i class="fab fa-google-drive" style="font-size: 1.5rem;"></i> Download via Google Drive</a>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // --- ðŸª„ MAGIC CURSOR LOGIC ðŸª„ ---
        const cursorDot = document.querySelector("[data-cursor-dot]");
        const cursorOutline = document.querySelector("[data-cursor-outline]");

        window.addEventListener("mousemove", function (e) {
            const posX = e.clientX;
            const posY = e.clientY;

            cursorDot.style.left = `${posX}px`;
            cursorDot.style.top = `${posY}px`;

            cursorOutline.animate({
                left: `${posX}px`,
                top: `${posY}px`
            }, { duration: 500, fill: "forwards" });
        });

        // Add hover effect for clickable elements
        const clickables = document.querySelectorAll('a, button, .movie-card, input, .logo, .close-btn');
        clickables.forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
        });

        // --- ðŸš¨ 3D TILT EFFECT LOGIC ðŸš¨ ---
        function initTilt() {
            const cards = document.querySelectorAll('.movie-card');
            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const rotateX = ((y - centerY) / centerY) * -10; // Max rotation deg
                    const rotateY = ((x - centerX) / centerX) * 10;

                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.05, 1.05, 1.05)`;
                });

                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
                });
            });
        }

        // GENERATE PARTICLES
        const particlesContainer = document.getElementById('particles');
        for(let i=0; i<30; i++) {
            let p = document.createElement('div');
            p.classList.add('particle');
            p.style.left = Math.random() * 100 + 'vw';
            p.style.width = Math.random() * 5 + 2 + 'px';
            p.style.height = p.style.width;
            p.style.animationDuration = Math.random() * 5 + 5 + 's';
            p.style.animationDelay = Math.random() * 5 + 's';
            particlesContainer.appendChild(p);
        }

        // PRELOADER
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => { 
                const preloader = document.getElementById('preloader');
                if(preloader) { preloader.style.opacity = '0'; setTimeout(() => { preloader.style.display = 'none'; }, 600); }
            }, 600);
            initMap();
        });

        // SCROLL REVEAL
        function reveal() {
            var reveals = document.querySelectorAll(".reveal");
            for (var i = 0; i < reveals.length; i++) {
                var windowHeight = window.innerHeight;
                var elementTop = reveals[i].getBoundingClientRect().top;
                var elementVisible = 100;
                if (elementTop < windowHeight - elementVisible) { reveals[i].classList.add("active"); }
            }
        }
        window.addEventListener("scroll", reveal);
        reveal();

        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            if (window.scrollY > 50) header.classList.add('scrolled');
            else header.classList.remove('scrolled');
        });

        // --- 1. SINHALA MOVIES (ALL NEW LINKS ADDED) ---
        const sinhalaMoviesList = [
            { name: "à¶±à·’à¶¸à·’ (Nimi)", image: "images/nimi.jpg", link: "https://drive.google.com/file/d/1P_MWr6_x3FRw4eDgFrTIUGhfm6IUGHQ6/view?usp=sharing" }, 
            { name: "Zoom", image: "images/zoom.jpg" },
            { name: "à¶­à¶§à·Šà¶§à·” à¶¯à·™à¶šà·š à¶‰à·ƒà·Šà¶šà·à¶½à·š", image: "images/tattudekeiskole.jpg", link: "https://drive.google.com/file/d/1XI8lDvMu4uoNliwfQXsM0txMtr8m-RmK/view?usp=sharing" }, 
            { name: "à¶ºà·– à¶§à¶»à·Šà¶±à·Š (U Turn)", image: "images/uturn.jpg", link: "https://drive.google.com/file/d/1qo2eI5VnS9pMdDm03rK1qzLZjPYk3ljt/view?usp=sharing" },
            { name: "à¶†à¶¯à¶»à¶«à·“à¶º à¶šà¶­à·à·€à¶šà·Š", image: "images/adaraniyakathwk.jpg", link: "https://drive.google.com/file/d/1YNbdUTS6ckKC2X3Uw03Rc1jK9v-rJjaw/view?usp=sharing" }, 
            { name: "à¶¢à¶‚à¶œà·’ à·„à·œà¶»à·", image: "images/uderpantsthief.jpg", link: "https://drive.google.com/file/d/1gyu_R6oVq5IANYyH6jaWSJusBJU2mXos/view?usp=sharing" },
            { name: "à¶†à¶½à·š à¶šà·œà¶»à·à¶±à·", image: "images/aalecorona.jpg", link: "https://drive.google.com/file/d/179v0_uUglkGdS7yg8uITWLv2cPPamDRe/view?usp=sharing" }, 
            { name: "Ice Cream", image: "images/icecream.jpg", link: "https://drive.google.com/file/d/1zNkAmPmm0s1FrJKxnjBCMSJNPswiYP3C/view?usp=sharing" },
            { name: "à·ƒà·–à¶»à·’à¶ºà· (Soorya)", image: "images/soorya.jpg", link: "https://drive.google.com/file/d/1kptW9q_KMGrxoY3409ZRrP6_GD1qTPNd/view?usp=sharing" },
            { name: "à¶šà¶¯à·’à¶» à¶¯à·’à·€à·Šâ€à¶ºà¶»à·à¶¢ (Kadira Divyaraja)", image: "images/kadira divyaraja.jpg", link: "https://drive.google.com/file/d/163ZLGCOzcJaG4SqilecAmNhjDsMiMMLO/view?usp=sharing" },
            { name: "My Red Comrade", image: "images/my red comrade.jpg", link: "https://drive.google.com/file/d/1BwNZdWfLNSTUshO4XYRMhH5v8vYKl6-a/view?usp=sharing" },
            { name: "à¶´à·à·ƒà·Šà¶´à·à¶§à·Š (Passport)", image: "images/passport.jpg", link: "https://drive.google.com/file/d/1zkbX6GOGv27_yc7AD_NTR2-jBT0QgQ_T/view?usp=sharing" },
            { name: "à·ƒà·“à¶»à·”à·€à·™à¶±à·Š (Seeruwenn)", image: "images/seeruwenn.jpg", link: "https://drive.google.com/file/d/1RlD41BF2sLUVNgMbBFYgfad0dAVG5JRG/view?usp=sharing" },
            { name: "à·ƒà·’à·„à·’à¶± à¶±à·™à·…à·”à¶¸à·Š à¶¸à¶½à·Š (Sihina Nelum Mal)", image: "images/sihina nelum mal.jpg", link: "https://drive.google.com/file/d/1z41IiHNZKk7MNSfYswpBAudHLhcCPO9o/view?usp=sharing" },
            { name: "à·€à·…à¶¸à·Šà¶´à·–à¶»à·’ (Walampoori)", image: "images/walampoori.jpg", link: "https://drive.google.com/file/d/1Jks1FNGYkRBzp84Wm3ecvSnfZ4CdyfJi/view?usp=sharing" },
            { name: "à¶œà·’à¶±à·’ à¶…à·€à·’ à·ƒà·„ à¶œà·’à¶±à·’ à¶šà·™à·…à·’ (Gini Awi Saha Gini Keli)", image: "images/gini awi saha gini keli.jpg", link: "https://drive.google.com/file/d/1ws4Sk_A81miIzlplCjlcegQxrKaczc_L/view?usp=sharing" },
            { name: "Super Six", image: "images/super six.jpg", link: "https://drive.google.com/file/d/1Q7eyc4h-boxuAC5-Y9BnbAVlAlmi5Dde/view?usp=sharing" },
            { name: "Raja Horu", image: "images/raja horu.jpg", link: "https://drive.google.com/file/d/16D1kvKFQoYW_USi2oc7IRJ24UWC8CQOr/view?usp=sharing" },
            { name: "Ranja", image: "images/ranja.jpg", link: "https://drive.google.com/file/d/1sQ3n_ekXjag6ELl5XafMP6Kciq0WAwti/view?usp=sharing" },
            { name: "Sarigama", image: "images/sarigama.jpg", link: "https://drive.google.com/file/d/1FOFwCdOwMCM7ZK3NiGZP_CwfJfiDWQor/view?usp=sharing" },
            { name: "Maya", image: "images/maya.jpg", link: "https://drive.google.com/file/d/16f7fKxl-E4kY2xd73K7vo36lHTdl_cO2/view?usp=sharing" }
        ];

        // --- 2. HOLLYWOOD MOVIES (56 Days LINK UPDATED) ---
        const hollywoodMoviesList = [
            { name: "28 Years Later", image: "hollywood/28 Years Later The Bone Temple.jpg", link: "https://drive.google.com/file/d/1DwojxBuP7mM3RvhgvEFwd2xB-3y6rjeT/view?usp=sharing" }, 
            { name: "Anaconda", image: "hollywood/anaconda.jpg", link: "https://drive.google.com/file/d/1EnxzyZB1OW6S1p1GiL5zF7jvAPYe6B7d/view?usp=sharing" },
            { name: "Bad Teacher", image: "hollywood/bad teacher.jpg", link: "https://drive.google.com/file/d/1epHpEJMGEB7HQtsn3xkiLEbJ6Cxijcb9/view?usp=sharing" }, 
            { name: "Christy", image: "hollywood/christy.jpg", link: "https://drive.google.com/file/d/1gr4TIXBjDtHXbn7P3s4Kpe2SDCnAv_88/view?usp=sharing" },
            { name: "I Swear", image: "hollywood/i swear.jpg", link: "https://drive.google.com/file/d/1HxEFFWLlEj1b2SIeHDx24H8wbc8x7SLZ/view?usp=sharing" }, 
            { name: "Im Still Here", image: "hollywood/im still here.jpg", link: "https://drive.google.com/file/d/1A2LgH9-XPG1SK8xYGGbAZUNqlY7DELN2/view?usp=sharing" },
            { name: "Sisu: Road to Revenge", image: "hollywood/sisu road to revenge.jpg", link: "https://drive.google.com/file/d/1E4FvU8NH44xJxhTGCIzlyMsurf-Rzf3f/view?usp=sharing" }, 
            { name: "Tron: Ares", image: "hollywood/tron areas.jpg", link: "https://drive.google.com/file/d/1qBch57C3un6RmKd1I1Gm6yh9R7rlYLKp/view?usp=sharing" },
            { name: "Wake Up Dead Man", image: "hollywood/wakeup dead man.jpg", link: "https://drive.google.com/file/d/1DMnvsxfp_1cpzM07sW1OcO5OsxNLkG3q/view?usp=sharing" }, 
            { name: "Marty Supreme", image: "hollywood/Marty Supreme.jpg", link: "https://drive.google.com/file/d/1YW58oA0zBc7m2nODDANj52HJ3j_Xluox/view?usp=sharing" },
            { name: "56 Days", image: "hollywood/56 days.jpg", link: "https://drive.google.com/drive/folders/1NDWZ2tB3LTsguCaUk-jfd1ghvMV5uQW9?usp=sharing" }
        ];

        // --- ðŸš¨ NEW: K-DRAMA SECTION ðŸš¨ ---
        const kdramaMoviesList = [
            { name: "Squid Game", image: "kdrama/squid_game.jpg", link: "#" },
            { name: "All of Us Are Dead", image: "kdrama/all_of_us_are_dead.jpg", link: "#" },
            { name: "Kingdom", image: "kdrama/kingdom.jpg", link: "#" },
            { name: "Sweet Home", image: "kdrama/sweet_home.jpg", link: "#" },
            { name: "Business Proposal", image: "kdrama/business_proposal.jpg", link: "#" }
        ];

        // --- 3. 18+ MOVIES ---
        const adultMoviesList = [
            { name: "Belle de Jour", image: "adult/Belle de Jour.jpg", link: "https://drive.google.com/file/d/1PM4AIVa1e3mbUybHwLgkG1Ozz9jJcu-D/view?usp=sharing" }, 
            { name: "Great Expectations", image: "adult/Great ExpectatioNs.jpg", link: "https://drive.google.com/file/d/17Bqn36gg9cln7PueeGt0W7spc6m6PhSy/view?usp=sharing" }, 
            { name: "Henry & June", image: "adult/Henry & June.jpg" }, 
            { name: "House of Tolerance", image: "adult/House of Tolerance.jpg" },
            { name: "Ligaw", image: "adult/Ligaw.jpg", link: "https://drive.google.com/file/d/1tbumuzYj4xbF3BeRIJ5ZlR05paV3rrpl/view?usp=sharing" }, 
            { name: "Love at the Top", image: "adult/Love at the Top.jpg" },
            { name: "Night Nurse", image: "adult/Night Nurse.jpg", link: "https://drive.google.com/file/d/1u0GKsNipK98x6aNsaCCntWyrs6NYfgyG/view?usp=sharing" }, 
            { name: "Rapsa", image: "adult/Rapsa.jpg" },
            { name: "Sabik", image: "adult/Sabik.jpg" }, 
            { name: "So Young, So Lovely, So Vicious", image: "adult/So Young, So Lovely, So Vicious.jpg" },
            { name: "The Sexual Story of O", image: "adult/The Sexual Story of O.jpg" }, 
            { name: "Uncle Tom Cabin", image: "adult/Uncle Tom Cabin.jpg" } 
        ];

        function renderMovies(containerId, movieList, isAdult = false) {
            const container = document.getElementById(containerId);
            let html = '';
            movieList.forEach((movie) => {
                const warning = isAdult ? `<div class="adult-warning"><i class="fas fa-lock"></i> 18+</div>` : '';
                const blurClass = isAdult ? 'style="filter: blur(5px) brightness(0.8);"' : '';
                const safeName = movie.name.replace(/'/g, "\\'");
                const movieLink = movie.link ? movie.link : '#';
                
                const rating = (Math.random() * (9.5 - 6.5) + 6.5).toFixed(1);
                const qualities = ["1080p WebRip", "4K UHD", "Blu-Ray", "HD CAM"];
                const quality = qualities[Math.floor(Math.random() * qualities.length)];

                html += `
                    <div class="movie-card" data-title="${movie.name.toLowerCase()}" onclick="openModal('${safeName}', '${movieLink}')">
                        <div class="card-tags">
                            <span class="tag-rating"><i class="fas fa-star"></i> ${rating}</span>
                            <span class="tag-quality">${quality}</span>
                        </div>
                        ${warning}
                        <img src="${movie.image}" alt="${movie.name}" ${blurClass} onerror="this.src='https://via.placeholder.com/200x300/111/fff?text=No+Image'">
                        <div class="play-overlay"><div class="play-btn-icon"><i class="fas fa-play" style="margin-left:4px;"></i></div></div>
                        <h4>${movie.name}</h4>
                    </div>
                `;
            });
            container.innerHTML = html;
            initTilt();
        }

        renderMovies('sinhala-movies', sinhalaMoviesList);
        renderMovies('english-movies', hollywoodMoviesList);
        renderMovies('kdrama-movies', kdramaMoviesList); // New K-Drama Render
        renderMovies('adult-movies', adultMoviesList, true); 

        function liveSearchMovies() {
            const query = document.getElementById('mainSearchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.movie-card');
            cards.forEach(card => {
                const title = card.getAttribute('data-title');
                if(title.includes(query)) { card.style.display = 'block'; } else { card.style.display = 'none'; }
            });
        }

        function submitMovieRequest(event) {
            event.preventDefault();
            const btn = document.getElementById('reqSubmitBtn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            btn.style.background = '#ff2a35';
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-check-circle"></i> Request Sent Successfully!';
                btn.style.background = 'linear-gradient(45deg, #25D366, #1ebe57)';
                btn.style.boxShadow = '0 8px 20px rgba(37, 211, 102, 0.4)';
                document.getElementById('movieRequestForm').reset();
                setTimeout(() => {
                    btn.innerHTML = 'Submit Request <i class="fas fa-paper-plane"></i>';
                    btn.style.background = 'linear-gradient(45deg, var(--accent-red), #ff2a35)';
                    btn.style.boxShadow = '0 8px 20px rgba(229,9,20,0.4)';
                }, 3500);
            }, 1500);
        }

        const cinemaData = [
            { name: "Scope Cinemas - CCC", city: "Colombo", type: "IMAX / 3D", lat: 6.9240, lon: 79.8500 },
            { name: "Liberty By Scope", city: "Kollupitiya", type: "2D / 3D", lat: 6.9080, lon: 79.8510 },
            { name: "PVR Cinemas - One Galle Face", city: "Colombo", type: "4DX / 3D", lat: 6.9280, lon: 79.8440 },
            { name: "Milano Diamond", city: "Maharagama", type: "2D / 3D", lat: 6.8480, lon: 79.9230 },
            { name: "Savoy 3D", city: "Wellawatte", type: "2D / 3D", lat: 6.8740, lon: 79.8600 },
            { name: "Majestic Cineplex", city: "Bambalapitiya", type: "2D / 3D", lat: 6.8940, lon: 79.8540 },
            { name: "Nidahas Cinema", city: "Homagama", type: "2D / 3D", lat: 6.8420, lon: 80.0030 },
            { name: "Kandy City Centre Cineplex", city: "Kandy", type: "2D / 3D", lat: 7.2930, lon: 80.6380 },
            { name: "Regal Cinema", city: "Kandy", type: "2D / 3D", lat: 7.2900, lon: 80.6330 },
            { name: "Queens Cinema", city: "Galle", type: "2D / 3D", lat: 6.0340, lon: 80.2150 },
            { name: "Cinemax 3D", city: "Matara", type: "2D / 3D", lat: 5.9490, lon: 80.5470 },
            { name: "Imperial Talkies", city: "Kurunegala", type: "2D / 3D", lat: 7.4870, lon: 80.3650 },
            { name: "Regal Cinema", city: "Negombo", type: "2D / 3D", lat: 7.2080, lon: 79.8360 },
            { name: "Regal Gampaha", city: "Gampaha", type: "2D / 3D", lat: 7.0870, lon: 79.9980 },
            { name: "Majestic Cineplex", city: "Jaffna", type: "2D / 3D", lat: 9.6610, lon: 80.0250 },
            { name: "New Imperial Cinema", city: "Anuradhapura", type: "2D / 3D", lat: 8.3440, lon: 80.4070 },
            { name: "Imperial", city: "Ratnapura", type: "2D / 3D", lat: 6.6820, lon: 80.3990 },
            { name: "Kool Cinema", city: "Batticaloa", type: "2D / 3D", lat: 7.7170, lon: 81.6980 },
            { name: "Milano Cityplex", city: "Kegalle", type: "2D / 3D", lat: 7.2510, lon: 80.3460 }
        ];

        let map; let markersLayer; let userLocation = null;
        const movieIcon = L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/2503/2503508.png', iconSize: [35, 35], iconAnchor: [17, 35], popupAnchor: [0, -35] });
        const userIcon = L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/149/149059.png', iconSize: [40, 40], iconAnchor: [20, 40], popupAnchor: [0, -40] });

        function initMap() {
            map = L.map('map').setView([7.8731, 80.7718], 7); 
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { attribution: '&copy; OpenStreetMap' }).addTo(map);
            markersLayer = L.featureGroup().addTo(map);
            renderCinemasAndMap(cinemaData);
            setTimeout(() => { map.invalidateSize(); }, 800);
        }

        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; 
            const dLat = (lat2 - lat1) * Math.PI / 180; const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return (R * c).toFixed(1);
        }

        function renderCinemasAndMap(cinemasToRender) {
            const cinemaGrid = document.getElementById('cinemaGrid');
            cinemaGrid.innerHTML = ""; markersLayer.clearLayers();
            if(cinemasToRender.length === 0) { cinemaGrid.innerHTML = "<p style='color:#888;'>No cinemas found matching your search.</p>"; return; }

            if(userLocation) { L.marker([userLocation.lat, userLocation.lon], {icon: userIcon}).addTo(markersLayer).bindPopup("<b style='color:black; font-size:1.1rem;'>You are here!</b>"); }

            cinemasToRender.forEach(cinema => {
                let distText = ""; let rawDist = 9999;
                if(userLocation) {
                    rawDist = parseFloat(calculateDistance(userLocation.lat, userLocation.lon, cinema.lat, cinema.lon));
                    distText = `<span class="distance"><i class="fas fa-route"></i> ${rawDist} km away</span>`;
                    cinema.sortDist = rawDist; 
                }
                cinemaGrid.innerHTML += `
                    <div class="cinema-box">
                        <h3><i class="fas fa-video"></i> ${cinema.name}</h3>
                        <p><i class="fas fa-map-marker-alt" style="width:20px;"></i> ${cinema.city}</p>
                        <p><i class="fas fa-glasses" style="width:20px;"></i> ${cinema.type}</p>
                        ${distText}
                    </div>
                `;
                L.marker([cinema.lat, cinema.lon], {icon: movieIcon}).addTo(markersLayer).bindPopup(`<b style='color:black; font-size:1.2rem;'>ðŸŽ¬ ${cinema.name}</b><br><span style='color:#333; font-weight:600;'>${cinema.city}</span> ${userLocation ? '<br><span style="color:#e50914; font-weight:bold; font-size:1.1rem;">'+rawDist+' km</span>' : ''}`);
            });
            if(markersLayer.getLayers().length > 0) { map.flyToBounds(markersLayer.getBounds(), { padding: [50, 50], maxZoom: 14, duration: 1.5 }); }
        }

        function filterCinemas() {
            const query = document.getElementById('cinemaSearchInput').value.toLowerCase();
            let filtered = cinemaData.filter(c => c.name.toLowerCase().includes(query) || c.city.toLowerCase().includes(query));
            if(userLocation) {
                filtered.forEach(c => { c.sortDist = parseFloat(calculateDistance(userLocation.lat, userLocation.lon, c.lat, c.lon)); });
                filtered.sort((a,b) => a.sortDist - b.sortDist);
            }
            renderCinemasAndMap(filtered);
        }

        function locateUser() {
            const btn = document.getElementById('btnLocation');
            btn.innerHTML = "<i class='fas fa-spinner fa-spin'></i> Locating...";
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (pos) => {
                        userLocation = { lat: pos.coords.latitude, lon: pos.coords.longitude };
                        btn.innerHTML = "<i class='fas fa-check-circle'></i> Location Synced";
                        btn.style.background = "linear-gradient(45deg, #25D366, #1ebe57)"; btn.style.borderColor = "transparent";
                        filterCinemas(); 
                    },
                    (err) => {
                        btn.innerHTML = "<i class='fas fa-exclamation-triangle'></i> Location Denied";
                        btn.style.background = "linear-gradient(45deg, var(--accent-red), #b80710)";
                        alert("Please allow location access to see accurate distances.");
                    }
                );
            }
        }

        // ðŸš¨ FIXED: Video Player with proper regex and permissions ðŸš¨
        const modal = document.getElementById('movieModal');
        function openModal(title, link = '#') {
            document.getElementById('modalTitle').innerText = title;
            const downloadBtn = document.getElementById('modalDownloadBtn');
            const videoContainer = document.getElementById('modalVideoContainer');
            
            downloadBtn.href = link;
            
            if(link === '#') {
                downloadBtn.onclick = function(e) { e.preventDefault(); alert('Movie stream/download link is not available yet.'); };
                downloadBtn.removeAttribute('target');
                videoContainer.innerHTML = '<i class="fas fa-play-circle" style="font-size: 6rem; color: rgba(255,255,255,0.9); filter: drop-shadow(0 0 20px rgba(0,0,0,0.9));"></i>';
            } else {
                downloadBtn.onclick = null; downloadBtn.target = '_blank'; 
                
                // Regex to correctly extract Google Drive ID from any sharing link
                const match = link.match(/[-\w]{25,}/);
                if(match && match[0]) {
                    const driveId = match[0];
                    videoContainer.innerHTML = `
                        <div id="videoLoader" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); display:flex; flex-direction:column; align-items:center; z-index:2;">
                            <div style="width: 50px; height: 50px; border: 4px solid rgba(229, 9, 20, 0.2); border-top: 4px solid #e50914; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                            <span style="margin-top:15px; color:#ccc; font-size:0.95rem; font-weight:600; letter-spacing:1px; text-shadow: 0 0 10px #000;">Loading Stream...</span>
                        </div>
                        <iframe src="https://drive.google.com/file/d/${driveId}/preview" onload="document.getElementById('videoLoader').style.display='none';" style="width: 100%; height: 100%; border: none; position: absolute; top: 0; left: 0; z-index: 5; background: #000;" allow="autoplay; fullscreen" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>
                    `;
                } else {
                    videoContainer.innerHTML = '<i class="fas fa-play-circle" style="font-size: 6rem; color: rgba(255,255,255,0.9); filter: drop-shadow(0 0 20px rgba(0,0,0,0.9));"></i>';
                }
            }
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('active'), 10); 
        }

        function closeModal() {
            modal.classList.remove('active');
            setTimeout(() => { 
                modal.style.display = 'none'; 
                document.getElementById('modalVideoContainer').innerHTML = '<i class="fas fa-play-circle" style="font-size: 6rem; color: rgba(255,255,255,0.9); filter: drop-shadow(0 0 20px rgba(0,0,0,0.9));"></i>';
            }, 400); 
        }
        window.onclick = function(event) { if (event.target === modal) closeModal(); }
    </script>
</body>
</html>
